# 性能测试

## 测试环境

- 处理器: 13th Gen Intel(R) Core(TM) i9-13980HX
- 内存: 64GB
- 操作系统: Windows 11
- 编程语言: Go 1.23.3

## 测试结果

### HMAC 性能测试

| 操作 | 每次操作耗时 | 内存分配 | 分配次数 | 每秒操作数 |
|------|------------|----------|----------|------------|
| 签名 | 461.0 ns   | 536 B    | 7 次     | 约217万次   |
| 验证 | 481.7 ns   | 536 B    | 7 次     | 约208万次   |

### RSA 性能测试

| 操作 | 每次操作耗时 | 内存分配 | 分配次数 | 每秒操作数 |
|------|------------|----------|----------|------------|
| 签名 | 634.64 µs  | 1056 B   | 7 次     | 约1,576次  |
| 验证 | 19.84 µs   | 1264 B   | 9 次     | 约50,403次 |

## 性能分析

### HMAC 性能
- 签名和验证性能优异，每秒可处理200万+操作
- 内存分配适中，每次操作536字节
- 内存分配次数合理，每次操作7次分配

### RSA 性能
- 验证性能良好，每秒可处理5万+次验证
- 签名性能符合预期，每秒可处理1500+次签名
- 内存分配合理，签名1056字节，验证1264字节

## 结论

当前实现的性能完全满足大多数应用场景的需求：

1. **符合预期**：
   - RSA操作比HMAC慢是符合算法特性的
   - 内存分配和次数都在合理范围内

2. **实际应用**：
   - 一般API服务每秒处理几千到几万请求就已经是很高的并发
   - 当前实现的性能足以应对大多数高并发场景

3. **优化空间**：
   如果未来需要更高性能，可以考虑：
   - 实现密钥缓存
   - 优化内存分配次数
   - 使用更高效的算法实现

综上所述，当前实现的性能指标已经完全满足需求，无需进行进一步的性能优化。
